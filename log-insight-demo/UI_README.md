# Log Insight Dashboard - UI Documentation

## Overview

The Log Insight Dashboard is a real-time web interface that displays analyzed log data from the ChaosService. It automatically syncs with logs generated by the system and provides a clean, modern interface for monitoring system health.

## Features

### Real-time Updates
- **WebSocket Connection**: Automatically connects to the backend and receives log analysis results in real-time
- **Auto-reconnect**: If the connection drops, the UI will automatically attempt to reconnect every 3 seconds
- **Live Status Indicator**: Shows connection status (Connected/Disconnected)

### Log Display
The UI displays logs in a table with the following columns:
- **Timestamp**: When the log was generated
- **Severity**: Log severity level (INFO, WARN, ERROR, CRITICAL) with color-coded badges
- **Component**: The system component that generated the log
- **Error Type**: Type of error encountered
- **Root Cause Summary**: Brief explanation of the issue (max 10 words)
- **Suggested Action**: Recommended action to resolve the issue

### Controls
- **Clear Logs**: Remove all logs from the display
- **Pause/Resume**: Pause incoming log updates (useful for analyzing specific logs)
- **Auto-scroll**: Toggle automatic scrolling to newest logs
- **Severity Filter**: Filter logs by severity level (All, Critical, Error, Warning, Info)

### Statistics
Real-time counters display:
- Total number of logs received
- Count of critical severity logs
- Count of error severity logs

## Architecture

### Frontend Stack
- **HTML5**: Semantic markup
- **CSS3**: Modern styling with gradients, animations, and responsive design
- **Vanilla JavaScript**: No frameworks required, lightweight and fast

### Backend Integration
- **WebSocket Endpoint**: `ws://localhost:8080/logs/stream`
- **REST Endpoint**: `http://localhost:8080/` (serves the UI)

### File Structure
```
src/main/resources/ui/
â”œâ”€â”€ index.html    # Main HTML structure
â”œâ”€â”€ styles.css    # All styling and animations
â””â”€â”€ app.js        # WebSocket logic and UI interactions
```

## How to Use

### Starting the Application

1. **Start Quarkus in Dev Mode**:
   ```bash
   ./mvnw quarkus:dev
   ```

2. **Access the UI**:
   Open your browser and navigate to:
   ```
   http://localhost:8080
   ```

3. **Watch Logs Stream**:
   The ChaosService generates logs every 1.3 seconds, which are automatically analyzed and displayed in the UI.

### Using the Interface

1. **Monitor Real-time Logs**:
   - Logs appear automatically as they're generated
   - Newest logs appear at the top
   - Color-coded severity badges help identify critical issues quickly

2. **Filter Logs**:
   - Use the severity dropdown to filter by log level
   - Useful for focusing on critical or error logs only

3. **Pause Analysis**:
   - Click "Pause" to stop receiving new logs
   - Useful when you want to analyze specific entries
   - Click "Resume" to continue receiving logs

4. **Clear Display**:
   - Click "Clear Logs" to remove all logs from the table
   - Statistics counters will reset to zero

5. **Auto-scroll**:
   - Keep checked to automatically scroll to newest logs
   - Uncheck if you want to manually browse through logs

## Technical Details

### WebSocket Communication

The UI establishes a WebSocket connection to receive log analysis results:

```javascript
// Connection URL
ws://localhost:8080/logs/stream

// Message Format (JSON)
{
  "severity": "ERROR",
  "component": "database_connection_pool",
  "errorType": "ConnectionTimeout",
  "rootCauseSummary": "Database connection pool exhausted",
  "suggestedAction": "Increase pool size",
  "timestamp": "2024-11-24T22:30:00.000Z"
}
```

### Styling Features

- **Gradient Background**: Modern purple gradient
- **Responsive Design**: Works on desktop, tablet, and mobile
- **Smooth Animations**: Logs slide in with fade effect
- **Color-coded Severity**:
  - ðŸ”´ CRITICAL: Red badge
  - ðŸŸ  ERROR: Orange badge
  - ðŸŸ¡ WARN: Yellow badge
  - ðŸ”µ INFO: Blue badge

### Browser Compatibility

- Chrome/Edge: âœ… Full support
- Firefox: âœ… Full support
- Safari: âœ… Full support
- Opera: âœ… Full support

Requires WebSocket support (all modern browsers).

## Customization

### Changing Update Frequency

To modify how often logs are generated, edit `ChaosService.java`:

```java
@Scheduled(every = "1.3s")  // Change this value
void generateChaos() {
    // ...
}
```

### Styling Modifications

All styles are in `src/main/resources/ui/styles.css`. Key sections:
- Colors and gradients: Lines 1-50
- Table styling: Lines 150-200
- Severity badges: Lines 220-250
- Responsive design: Lines 300-339

### Adding New Columns

To add new columns to the table:

1. Update `LogAnalysisResult.java` record
2. Modify `LogAnalysisWebSocket.java` JSON serialization
3. Add column to `index.html` table header
4. Update `app.js` rendering logic

## Troubleshooting

### UI Not Loading
- Ensure Quarkus is running: `./mvnw quarkus:dev`
- Check console for errors
- Verify port 8080 is not in use

### WebSocket Not Connecting
- Check browser console for connection errors
- Verify WebSocket endpoint is accessible
- Ensure firewall isn't blocking WebSocket connections

### Logs Not Appearing
- Check if ChaosService is running (look for scheduled task logs)
- Verify AI service is configured correctly
- Check if "Pause" button is active

### Performance Issues
- Clear logs periodically using "Clear Logs" button
- Consider reducing log generation frequency
- Check browser memory usage

## Production Considerations

For production deployment:

1. **Security**:
   - Add authentication to WebSocket endpoint
   - Implement CORS policies
   - Use WSS (WebSocket Secure) for encrypted connections

2. **Performance**:
   - Implement log pagination
   - Add database persistence
   - Consider log aggregation for high-volume scenarios

3. **Monitoring**:
   - Add metrics for WebSocket connections
   - Track UI performance
   - Monitor memory usage

## Support

For issues or questions:
- Check Quarkus logs for backend errors
- Review browser console for frontend errors
- Verify all dependencies are installed correctly